# Colorful Canvas: Anamorphic Illusion Studio

A comprehensive toolkit for creating stunning anamorphic illusions - 2D images with perspective distortion that appear 3D when viewed from specific angles.

## 🎯 What are Anamorphic Illusions?

**Anamorphic illusions** are specially distorted 2D images that create the illusion of 3D depth when viewed from the correct angle or perspective. These are **not actual 3D images**, but rather mathematically distorted 2D images that exploit human depth perception to create spectacular visual effects.

## Features

- **Shadow Box Illusion**: Creates the illusion of objects floating in a glass display case when viewed from the front
- **Screen Pop Illusion**: Makes objects appear to pop out of the screen surface with perspective distortion
- **Anamorphic Billboard**: Creates dramatic perspective distortion perfect for large billboards and street art
- **AI Depth Estimation**: Uses state-of-the-art neural networks to analyze depth relationships for precise distortion

## Project Structure

The project is organized as follows:

```
/
├── src/                       # Source code
│   ├── data/                  # Data loading and processing
│   │   ├── data_loader.py     # Dataset loading utilities
│   │   └── get_data.py        # GitHub data fetching
│   ├── models/                # ML model definitions
│   │   └── train_models.py    # Model training utilities
│   ├── utils/                 # Utility functions
│   ├── scripts/               # Helper scripts
│   ├── colorful_canvas_ai.py  # Core illusion generation code
│   └── run_pipeline.py        # Full pipeline implementation
│
├── models/                    # Trained model files
│   ├── depth_estimator.pth    # Depth estimation model
│   ├── illusion_predictor.pth # Illusion effectiveness predictor
│   └── performance_predictor.pth # Viewing success predictor
│
├── datasets/                  # Input datasets
├── output/                    # Output directory for results
├── demo/                      # Interactive web demo
├── examples/                  # Example images
├── docs/                      # Documentation
│
├── colorful_canvas_complete.py # Consolidated implementation
├── run.py                     # Main entry point
└── requirements.txt           # Dependencies
```

## Getting Started

### Installation

1. Clone this repository
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

### Usage

#### Interactive Web Demo (Recommended)
```bash
cd demo/web
python -m http.server 8002
# Open http://localhost:8002 in your browser
```

The web demo provides a user-friendly interface for:
- Uploading your own images or using sample images
- Selecting from different anamorphic illusion effects
- Previewing the results in real-time
- Viewing detailed instructions for each effect type
- Downloading the generated illusions

#### Command Line Demo
```bash
cd demo
python demo.py --interactive
```

The command-line demo walks you through:
- Selecting sample images from the data/samples directory
- Choosing an illusion effect to apply
- Generating the anamorphic illusion with AI-powered depth analysis
- Saving the result to the output directory

#### Command Line Interface
```bash
# Generate anamorphic illusions
python src/colorful_canvas.py --mode generate --image path/to/image.jpg --effect shadow_box --output output_dir

# Train models
python src/colorful_canvas.py --mode train

# Run demonstration
python src/colorful_canvas.py --mode demo
```

### Available Illusion Types

- **shadow_box**: Creates illusion of objects floating in a display case
- **screen_pop**: Makes objects appear to emerge from the screen surface  
- **anamorphic**: Creates billboard-style perspective distortion for large displays

## 👁️ How It Works

### 1. 🕸️ Depth Analysis
AI analyzes the input image to create a depth map showing relative distances of objects.

### 2. 📐 Perspective Calculation
Mathematical transformation calculates how to distort each pixel based on object depth and intended viewing angle.

### 3. 🎨 Distortion Application
The image is warped using perspective transformation - closer objects are stretched, farther objects are compressed.

### 4. 👁️ Optical Illusion
When viewed from the correct angle, your brain interprets the distorted 2D image as having realistic 3D depth!

## Requirements

- Python 3.8+
- OpenCV
- NumPy  
- PIL (Pillow)
- Scikit-learn
- Optional: PyTorch (for advanced depth estimation)

See `requirements.txt` for a complete list of dependencies.

## Examples

Below are examples of the different anamorphic illusions generated by the toolkit:

### Shadow Box Illusion
Creates the illusion of objects floating in a glass display case:
- **Viewing**: Look directly from the front at eye level
- **Applications**: Museum displays, product showcases

### Screen Pop Illusion  
Makes objects appear to pop out of the screen surface:
- **Viewing**: Look at screen from a 45-degree angle
- **Applications**: Interactive displays, social media content

### Anamorphic Billboard
Creates dramatic perspective distortion for large displays:
- **Viewing**: View from 15-20 feet away at slight upward angle
- **Applications**: Outdoor advertising, street art

## Real-World Applications

- **Street Art**: 3D chalk art and pavement illusions
- **Advertising**: Eye-catching billboard campaigns that appear to pop out
- **Museums**: Interactive educational exhibits
- **Social Media**: Viral content and Instagram posts
- **Digital Signage**: Attention-grabbing retail displays

## Scientific Principle

Anamorphic illusions exploit human visual perception:
- **Perspective**: Objects appear smaller when farther away
- **Parallax**: Different viewpoints reveal depth information
- **Brain Processing**: Visual cortex interprets distorted cues as 3D depth
- **Viewing Angle**: Specific angles align the distortion with natural perspective

## License

MIT

## Acknowledgements

This project uses the following open-source libraries and models:
- Intel/DPT depth estimation model
- OpenCV for image processing
- Scikit-learn for machine learning models
- PyTorch (optional) for advanced neural networks

# Colorful Canvas AI Art Studio

## New Generic Product Box Template 🎁

**Major Update:** Replaced hardcoded Nike-specific template with adaptive generic product box template!

### Why the Change?
- **Before:** Hardcoded Nike orange colors, swoosh logo, and "NIKE" text
- **After:** Intelligently adapts to ANY product image without brand-specific elements

### How It Works
The new `product_box` template:

1. **Extracts dominant colors** from your input image
2. **Adapts box design** based on extracted colors and chosen style
3. **Creates realistic anamorphic illusion** without hardcoded brand elements

### Available Box Styles

#### Classic Style (`--template classic`)
- Traditional cardboard box colors (tan/brown)
- Simple box edge lines
- Perfect for everyday products

#### Modern Style (`--template modern`) 
- Clean design with colors inspired by your product
- White lid with product-color base
- Geometric accent stripes

#### Premium Style (`--template premium`)
- Luxury dark box with metallic gold accents
- Perfect for high-end products
- Subtle corner details

### Usage Examples

```bash
# Classic cardboard box for any product
python3 src/milestone3/colorful_canvas_complete.py --mode generate \
  --image your_product.jpg --effect product_box --template classic

# Modern box that adapts to your product colors  
python3 src/milestone3/colorful_canvas_complete.py --mode generate \
  --image your_product.jpg --effect product_box --template modern

# Premium luxury box for high-end products
python3 src/milestone3/colorful_canvas_complete.py --mode generate \
  --image your_product.jpg --effect product_box --template premium
```

### Color Adaptation System
- **Primary colors:** Extracted from center region (main product)
- **Secondary colors:** Extracted from edges (background elements)
- **Smart constraints:** Colors are bounded to prevent extreme values
- **Style-specific application:** Each style uses colors differently

### Benefits Over Hardcoded Approach
✅ **Universal:** Works with any product (shoes, watches, bags, electronics, etc.)
✅ **Brand-neutral:** No hardcoded logos or brand elements  
✅ **Adaptive:** Box design matches your product aesthetics
✅ **Professional:** Three distinct styles for different use cases
✅ **Realistic:** Maintains the dramatic "coming out of box" anamorphic effect

---

## Original Template System

The system also includes other professional templates:

### Corner Display (`--effect corner`)
- Small/Medium/Large display boxes
- Products appear to pop out of corner displays

### Product Showcase (`--effect product`) 
- Floating: Products hover above surface
- Pedestal: Products on premium display stands

### Art Gallery (`--effect gallery`)
- Modern/Classic frames  
- Flat art appears 3D in frames

### Legacy Effects (`--effect shadow_box|screen_pop|anamorphic`)
- Original extreme distortion effects
- For specialized anamorphic art

## Complete Feature Set

### Machine Learning Models
- **IllusionPredictor:** Predicts visual illusion effectiveness (55-70% realistic accuracy)
- **DepthEstimator:** Generates depth maps from 2D images  
- **PerformancePredictor:** Predicts advertising campaign success

### Research Analytics
- H1: Depth complexity correlation analysis
- H2: Viewing angle optimization  
- H3: Commercial success prediction
- H4: Parameter optimization curves

### Professional Output
- High-quality JPEG export (95% quality)
- Optimized file sizes
- Professional template system
- Billboard-ready formats 